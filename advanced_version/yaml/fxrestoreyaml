apiVersion: apps/v1
kind: Deployment
metadata:
  name: fxrestore
  labels:
    app: fxrestore
spec:
  replicas: 5
  selector:
    matchLabels:
      app: fxrestore
  template:
    metadata:
      labels:
        app: fxrestore
    spec:
      containers:
      - name: fxrestore
        image: splunk/splunk:latest
        env:
        - name: SPLUNK_START_ARGS
          value: --accept-license
        - name: SPLUNK_PASSWORD
          value: helloworld
        volumeMounts:
        - mountPath: /mnt/data
          name: restoredata
        - mountPath: /mnt/nfs
          name: nfs
        - mountPath: /mnt/sshfs
          name: sshfs
        - mountPath: /opt/splunk/etc/apps/fishstix
          name: fishstix
      volumes:
        - name: restoredata
          hostPath:
            path: /mnt/data
            type: Directory
        - name: nfs
          hostPath:
            path: /mnt/nfs
            type: Directory
        - name: sshfs
          hostPath:
            path: /mnt/sshfs
            type: Directory
        - name: fishstix
          hostPath:
            path: /opt/fishstix
            type: Directory
